# Changelog

## Version 2.5.0

- fix parsing of VAR_CRITERION
  VAR_CRITERION contains a list of identifiers as well as the optional keywords VAR_MEASUREMENT
  and VAR_SELECTION_CHARACTERISTIC. These optional keywords were included in the list of identifiers if they were present
- improvements for the merge function
  - TYPEDEF_CHARACTERISTIC may reference a MEASUREMENT, but this reference was not updated during merges
  - USER_RIGHTS can no longer get duplicate user entries as a result of the merge
  - all items are merged in the order in which they appear in the merge file. Previously they were merged in reverse order
- During checking, accept referneces from an AXIS_PRS_REF or CURVE_AXIS_REF of a TYPEDEF_CHARACTERISTIC
  to a structure component of the containing structure using the notation THIS.component_name.

## Version 2.4.0

- OS independen path separator handling in /include (Akhil T Thomas)
- Add the APIs load_fragment2 and load_fragment_file2, deprecating the old versions
- a2l checker improvements
  - The RECORD_LAYOUT used by a CHARACTERISTIC must contain FNC_VALUES
  - A RECORD_LAYOUT must contain an AXIS_PTS_X/Y/Z for each internal axis
  - There should be a specific number of AXIS_DESCR depending on the type of RECORD_LAYOUT
  - The lower and upper limits of CHARACTERISTICs, MEASUREMENTs and AXIS_PTS
    are checked for plausibility based on the data type of the item and its COMPU_METHOD.

## Version 2.3.2

- fix incorrect handling of escape codes \r, \n, \t while writing files

## Version 2.3.1

- fix the newly added input quantity check in AXIS_PTS: NO_INPUT_QUANTITY must be handled explicitly

## Version 2.3.0

- change the behavior of merge for GROUPS and FUNCTION
  Previously, if two GROUPS in a merge had the same name, then the incoming group was renamed with the suffix ".MERGE".
  Now the content for GROUPs/FUNCTIONs with the same name is combined.
- a2l checker improvements
  - fix incorrect checks for TYPEDEF_AXIS and COMPU_METHOD
  - add extra checks for GROUP, MEASUREMENT, COMPU_METHOD, AXIS_PTS
  - add tests for all the checks

## Version 2.2.0

- allow the parser to read hex encoded integers where a float is expected (Louis Caron)
- generate Rust enums with values for A2ML enums with values in the a2ml_specification macro
- fix some cases where users of items that were renamed during a merge were not updated to use the new name

## Version 2.1.0

- add handling of /include inside A2ML blocks (Louis Caron)
- fix multi-level /include inside A2L (bug report by Louis Caron)

## Version 2.0.0

- Specification: AR_COMPONENT is a block enclosed in /begin and /end, not a keyword
- Specification: The integer value in a STRUCTURE_COMPONENT should be called "address_offset" instead of "size"
- Specification: The proc macro specification has been replaced with the code generated by the macro.
  This provides no direct benefit, but allows rust-analyzer to understand all of a2lfile.
- Cleanup: References from TYPEDEF_AXIS to RECORD_LAYOUT are now taken into account, so that used RECORD_LAYOUTs are not removed
- Cleanup: References from STATUS_STRING_REF to COMPU_METHOD are now taken into account, so that used COMPU_METHODs are not removed
- Documentation: The type of log_msgs is now correctly shown als A2lError instead of String
- Misc: Improved tests
- Misc: Updated github workflows
- Misc: Apache2 and MIT license files were added to the repository
